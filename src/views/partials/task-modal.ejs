<div id="task-detail-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
  <div class="bg-white rounded-lg p-6 w-full max-w-lg max-h-[90vh] overflow-y-auto">
    <div class="flex justify-between items-center mb-4">
      <h3 class="text-xl font-bold" id="task-modal-title">Detalles de la Tarea</h3>
      <button class="close-task-modal text-gray-500 hover:text-gray-700">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
    </div>
    
    <form id="task-detail-form">
      <input type="hidden" id="task-id" name="id">
      
      <!-- Campo título -->
      <div class="mb-4">
        <label for="detail-title" class="block text-sm font-medium text-gray-700 mb-1">Título</label>
        <input type="text" name="title" id="detail-title" required class="w-full p-2 border rounded focus:ring-blue-500 focus:border-blue-500">
      </div>
      
      <!-- Campo descripción -->
      <div class="mb-4">
        <label for="detail-description" class="block text-sm font-medium text-gray-700 mb-1">Descripción</label>
        <textarea name="description" id="detail-description" rows="3" class="w-full p-2 border rounded focus:ring-blue-500 focus:border-blue-500"></textarea>
      </div>
      
      <!-- Estado -->
      <div class="mb-4">
        <label for="detail-status" class="block text-sm font-medium text-gray-700 mb-1">Estado</label>
        <select name="status" id="detail-status" class="w-full p-2 border rounded focus:ring-blue-500 focus:border-blue-500">
          <option value="Por hacer">Por hacer</option>
          <option value="En progreso">En progreso</option>
          <option value="Completado">Completado</option>
        </select>
      </div>
      
      <!-- Asignado a -->
      <div class="mb-4">
        <label for="detail-assignedTo" class="block text-sm font-medium text-gray-700 mb-1">Asignar a</label>
        <select name="assignedTo" id="detail-assignedTo" class="w-full p-2 border rounded focus:ring-blue-500 focus:border-blue-500">
          <option value="">Sin asignar</option>
          <!-- Opciones cargadas dinámicamente -->
        </select>
      </div>
      
      <!-- Campos adicionales en una fila -->
      <div class="grid grid-cols-2 gap-4 mb-4">
        <div>
          <label for="detail-priority" class="block text-sm font-medium text-gray-700 mb-1">Prioridad</label>
          <select name="priority" id="detail-priority" class="w-full p-2 border rounded focus:ring-blue-500 focus:border-blue-500">
            <option value="Baja">Baja</option>
            <option value="Media">Media</option>
            <option value="Alta">Alta</option>
          </select>
        </div>
        <div>
          <label for="detail-dueDate" class="block text-sm font-medium text-gray-700 mb-1">Fecha límite</label>
          <input type="date" name="dueDate" id="detail-dueDate" class="w-full p-2 border rounded focus:ring-blue-500 focus:border-blue-500">
        </div>
      </div>
      
      <!-- Botones de acción -->
      <div class="flex justify-between items-center">
        <button type="button" id="delete-task-btn" class="bg-red-600 hover:bg-red-700 text-white py-2 px-4 rounded hidden">
          Eliminar Tarea
        </button>
        <div class="flex space-x-2">
          <button type="button" class="close-task-modal py-2 px-4 border rounded hover:bg-gray-100">Cancelar</button>
          <button type="submit" class="bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700">Guardar</button>
        </div>
      </div>
    </form>
    
    <!-- Sección de comentarios -->
    <div class="mt-8 pt-4 border-t" id="task-comments-section">
      <h4 class="font-semibold mb-4 flex items-center justify-between">
        <span>Comentarios</span>
        <button id="toggle-comments" class="text-sm text-blue-600 hover:underline flex items-center">
          <span class="mr-1">Mostrar</span>
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
          </svg>
        </button>
      </h4>
      
      <div id="comments-container" class="hidden">
        <!-- Aquí se cargan los comentarios -->
        <%- include('./comments') %>
      </div>
    </div>
  </div>
</div>
